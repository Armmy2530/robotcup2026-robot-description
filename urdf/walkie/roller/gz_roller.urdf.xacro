<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">
    <xacro:include filename="$(find walkie_description)/urdf/inertial_macros.xacro" />
    <xacro:include filename="$(find walkie_description)/urdf/walkie/roller/roller.gazebo.xacro" />
    <xacro:property name="roller_mass" value="0.0001" />
    <xacro:property name="roller_radius" value="0.019" />
    <xacro:macro name="roller" params="prefix num *joint_origin *joint_axis">

        <link name="roller_${prefix}_${num}_link">
            <xacro:inertial_sphere mass="${roller_mass}" radius="${roller_radius}">
                <origin xyz="0 0 0" rpy="0 0 0" />
            </xacro:inertial_sphere>
            <collision>
                <origin xyz="0 0 0" rpy="0 0 0" />
                <geometry>
                    <sphere radius="${roller_radius}" />

                  <!-- <mesh filename="package://armmy_omnibot/meshes/omni_wheel/Roller_Simplyfier.stl" -->
                    <!-- scale="0.001 0.001 0.001" /> -->


                  <!-- <mesh filename="$(find walkie_description)/meshes/walkie/roller_simplify.stl" -->
                  <!-- <mesh filename="package://walkie_description/meshes/walkie/roller_simplify_z.stl" -->
                      <!-- optimization="convex_decomposition"> -->
                        <!-- <convex_decomposition> -->
                            <!-- <voxel_resolution>500000</voxel_resolution> -->
                            <!-- <max_convex_hulls>16</max_convex_hulls> -->
                        <!-- </convex_decomposition> -->
                      <!-- </mesh> -->
                </geometry>
            </collision>
        </link>
        <joint name="roller_${prefix}_${num}_joint" type="continuous">
            <xacro:insert_block name="joint_origin" />
            <parent link="${prefix}_wheel_link" />
            <child link="roller_${prefix}_${num}_link" />
            <xacro:insert_block name="joint_axis" />
        </joint>
        <xacro:roller_gazebo_v0 prefix="${prefix}" />
    </xacro:macro>
</robot>
